<%
require "ez_crud/attrs"

#Check for a custom template for the type of object in question here - if it exists, use it
if lookup_context.template_exists?("/components/ez_crud/value/_#{value.class.name.underscore}.html.erb")
  concat render("components/ez_crud/value/#{value.class.name.underscore}.html.erb", value: value)
elsif value.is_a?(ActiveRecord::Base)
  attr = EzCrud::Attrs.title_attr(value.class)
  concat attr ? value.send(attr) : value
elsif value.is_a?(ActiveRecord::Associations::CollectionProxy)
  value.each do |v|
   concat render('components/ez_crud/value', value: v)
  end
else
  concat value
end
%>
